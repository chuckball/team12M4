<!DOCTYPE html>
<html>
<head>
    <title>Educycle</title>
    <meta name="description" content="Textures - A-Frame School">
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>

    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.rawgit.com/ngokevin/kframe/master/components/animation-timeline/dist/aframe-animation-timeline-component.min.js"></script>
    <script src="https://cdn.rawgit.com/ngokevin/kframe/master/components/animation/dist/aframe-animation-component.min.js"></script>
    <script src="https://rawgit.com/Utopiah/aframe-triggerbox-component/master/aframe-triggerbox-component.js"></script>

    <script src="events.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>

</head>


<body onload="init()">
<a-scene animation-timeline__1="timeline: #myTimeline;loop: true">
    <!-- Camera -->
    <a-entity camera="active: true" width="0" height="0" depth="0" rotate="90 0 90" look-controls position="0 3.5 40"
              wasd-controls="acceleration: 500; " kinematic-body keyboard-controls>
        <a-entity geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" position="0 0 -1"
                  material="color: gray; opacity: 0.5" cursor="fuse: true; fuseTimeout: 1500"></a-entity>

        <a-entity id="transport_model" rotation="0 90 0" scale="0.01 0.01 0.01" gltf-model="#scooter" width="0"
                  height="0" depth="0" position="0 -1 0"></a-entity>

        <a-text id="scor" value="score:" font="exo2bold" color="black" height="2" width="2" position="1 1 -2"></a-text>
        <a-text id="score" value="100" font="exo2bold" color="black" height="2" width="2" position="1.3 1 -2"></a-text>

        <a-animation begin="click" easing="ease-in" attribute="scale" dur="150"
                     fill="forwards" from="0.1 0.1 0.1" to="1 1 1"></a-animation>
        <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" dur="1500"
                     fill="backwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>

    </a-entity>
    sessionStorage.setItem('label', 'value')
    <!--<a-box link="href: https://github.com/gasolin/aframe-href-component" position="0 3.5 -2" rotation="30 30 0" width="2" depth="2" height="2" color="#F16745" ></a-box>
    -->
    <a-sky src="https://cdn.glitch.com/77b3de5c-4256-4595-bbdc-29d47f1293c4%2F33668382931_12240c6935_o.jpg?1536413956692"></a-sky>
    <a-plane static-body
             src="https://cdn.glitch.com/77b3de5c-4256-4595-bbdc-29d47f1293c4%2Fgrassroad1.jpg?1542821789354"
             rotation="-90 0 0" height="900" width="100" position="-5 0 -270"></a-plane>

    <a-light type="ambient" color="#666"></a-light>
    <a-light type="point" intensity="" position="-500 4 4"></a-light>

    <a-assets>
        <a-asset-item id="optimerBoldFont"
                      src="https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json"></a-asset-item>

        <!-- Models -->
        <a-asset-item id="manModel1"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/person_x/scene.gltf"></a-asset-item>
        <a-asset-item id="tree"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/tree/scene.gltf"></a-asset-item>
        <a-asset-item id="tree2"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/grassland_tree_-_smashy_craft_series_-_free/scene.gltf"></a-asset-item>
        <a-asset-item id="trafficlight"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/traffic_light__animation/scene.gltf"></a-asset-item>
        <a-asset-item id="manModel2"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/breakdance_freeze_var_21/scene.gltf"></a-asset-item>
        <a-asset-item id="yellowcar"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/yellowcar/scene.gltf"></a-asset-item>
        <a-asset-item id="whitecar"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/whitecar/scene.gltf"></a-asset-item>
        <a-asset-item id="bicycle"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/bicycle/scene.gltf"></a-asset-item>
        <a-asset-item id="scooter"
                      src="https://cdn.rawgit.com/xXWingadiumXx/AFrame-Models/master/razor_scooter/scene.gltf"></a-asset-item>


        <!-- Animation Timeline/Order -->
        <a-timeline id="myTimeline">
            <!--<a-timeline-animation select=".box" name="scale"></a-timeline-animation>-->
            <a-timeline-animation select=".man1" name="forward"></a-timeline-animation>
            <a-timeline-group>

                <!--<a-timeline-animation select=".box" name="rotate"></a-timeline-animation>-->

                <a-timeline-animation select=".man1" name="rotate"></a-timeline-animation>
            </a-timeline-group>

            <a-timeline-animation select=".man1" name="forward2"></a-timeline-animation>

            <a-timeline-animation select=".man1" name="rotate2"></a-timeline-animation>
        </a-timeline>


        <!-- Mixins -->
        <a-mixin id="boxScale"
                 animation__scale="property: scale; from: 1 1 1; to: 1.2 1.2 1.2; dur:5000;autoplay:false "
                 animation__rotate="property: rotation; from: 0 0 0;to: 0 360 0; dur:5000; autoplay:false"
        ></a-mixin>

        <a-mixin id="man1Move"
                 animation__forward="property: position; from: 0 1 0;to: 0 1 5; dur:3000; autoplay:false"
                 animation__rotate="property: rotation; from: 0 180 0;to: 0 0 0; dur:1500; autoplay:false"
                 animation__forward2="property: position; from: 0 1 5;to: 0 1 0; dur:3000; autoplay:false"
                 animation__rotate2="property: rotation; from: 0 0 0;to: 0 180 0; dur:1500; autoplay:false"
        ></a-mixin>

        <a-mixin id="sphereRotate" animation__rotate="property: rotation; to: 0 360 0; dur:5000;"></a-mixin>
    </a-assets>

    <!-- Entities -->
    <a-entity id="man1" class="man1 collision" width="0" height="0" depth="0" mixin="man1Move" position="0 0 0"
              kinematic-body>
        <a-entity gltf-model="#manModel1" width="0" height="0" depth="0" scale="0.01 0.01 0.01"
                  animation-mixer></a-entity>
    </a-entity>

    <a-entity id="#challenge" scale="0.01 0.01 0.01" gltf-model="#tree2" width="0" height="0" depth="0"
              position="-30 0 10"></a-entity>

    <!-- Arrows -->
    <a-entity ply-model="src:https://cdn.glitch.com/77b3de5c-4256-4595-bbdc-29d47f1293c4%2Frightarrow.ply?1542469071004"
              rotation="-90 0 0" position="-47 0 -165" scale="0.7 0.7 0.7"></a-entity>
    <a-entity ply-model="src:https://cdn.glitch.com/77b3de5c-4256-4595-bbdc-29d47f1293c4%2Farrowdown.ply?1542470143539"
              rotation="-90 -90 0" position="-20 42 -669" scale="0.8 0.8 0.8"></a-entity>
    <!-- Trees -->
    <a-entity scale="0.1 0.1 0.1" gltf-model="#tree" width="0" height="0" depth="0" position="-10 0 -20"></a-entity>
    <a-entity scale="0.1 0.1 0.1" gltf-model="#tree" width="0" height="0" depth="0" position="-10 0 -60"></a-entity>
    <a-entity scale="0.1 0.1 0.1" gltf-model="#tree" width="0" height="0" depth="0" position="-10 0 -100"></a-entity>
    <a-entity scale="0.1 0.1 0.1" gltf-model="#tree" width="0" height="0" depth="0" position="-10 0 -140"></a-entity>

    <a-entity gltf-model="#trafficlight" width="0" height="0" depth="0" scale="0.1 0.1 0.1" position="-100 0 11"
              rotation="0 180 0" animation-mixer></a-entity>
    <a-entity gltf-model="#trafficlight" width="0" height="0" depth="0" scale="0.1 0.1 0.1" position="-285 0 -13"
              animation-mixer></a-entity>
    <a-entity gltf-model="#trafficlight" width="0" height="0" depth="0" scale="0.1 0.1 0.1" position="-335 0 11"
              rotation="0 -90 0" animation-mixer></a-entity>

    <a-entity>
        <a-entity scale="0.02 0.02 0.02" rotation="0 -90 0" gltf-model="#yellowcar" width="0" height="0" depth="0"
                  position="-40 0 4"></a-entity>
        <a-animation attribute="position" dur="27000" fill="forwards" to="-350 0 0" repeat="indefinite"></a-animation>
    </a-entity>
    <a-entity>
        <a-entity scale="0.05 0.05 0.05" rotation="0 90 0" gltf-model="#whitecar" width="0" height="0" depth="0"
                  position="-450 0 -5" kinematic-body></a-entity>
        <a-animation attribute="position" dur="27000" fill="forwards" to="420 0 0" repeat="indefinite"></a-animation>
    </a-entity>
    <!-- Signs -->
    <a-image src="https://cdn.glitch.com/77b3de5c-4256-4595-bbdc-29d47f1293c4%2Fcrossing.png?1542820609905"
             position="-335 4 35" height="5" width="10" rotation="0 -90 0"></a-image>
    <a-entity scale="30 30 30" position="-35 18 -678" text-geometry="value: GOAL!; font: #optimerBoldFont; "
              rotation="0 270 0"></a-entity>
    <a-entity scale="30 30 30" position="-34.88961015542485 17.945238985423522 -677.7410162773322"
              text-geometry="value:GOAL!;font:https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json"
              rotation=""></a-entity>

    <a-entity scale="0.01 0.01 0.01" gltf-model="#tree2" width="0" height="0" depth="0" position="-30 0 -20"></a-entity>
    <a-entity scale="0.01 0.01 0.01" gltf-model="#tree2" width="0" height="0" depth="0" position="-30 0 -60"></a-entity>
    <a-entity scale="0.01 0.01 0.01" gltf-model="#tree2" width="0" height="0" depth="0"
              position="-30 0 -100"></a-entity>
    <a-entity scale="0.01 0.01 0.01" gltf-model="#tree2" width="0" height="0" depth="0"
              position="-30 0 -140"></a-entity>
    <a-entity scale="0.01 0.01 0.01" gltf-model="#tree2" width="0" height="0" depth="0"
              position="-30 0 -180"></a-entity>
    <a-entity scale="0.01 0.01 0.01" gltf-model="#tree2" width="0" height="0" depth="0"
              position="-30 0 -220"></a-entity>
    <!-- <a-gltf-model class="man1" mixin="man1Move" src="#manModel1" position="0 1 0" dynamic-body></a-gltf-model>
   -->


    <a-entity animation-mixer scale="0.0025 0.0025 0.0025" gltf-model="#manModel2" width="0" height="0" depth="0"
              position="0 0 -14"></a-entity>


    <!-- Invisible boxes to trigger events -->
    <a-box material="transparent:true;opacity:0.5" color="blue" id="goal"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21" position="-25- 2.5 -677" width="20"
           depth="9" static-body geometry="width:20">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>

    <!--    <a-box material="transparent:true;opacity:0.5" color="blue" id="quick_time_event" triggerbox="triggereventname:spheretest;width:21;height:21;depth:21" position="-22.452505764714772 1.695150162371693 -643.8513256772958" width="2" depth="9" static-body="sphereRadius:NaN" geometry="" rotation="0 90 0">
        </a-box> -->

    <a-box material="transparent:true;opacity:0.5" color="blue" id="restricted_zone_1"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="-10.39277163688203 2.5 -67.74288580160874" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:350;depth:8" rotation="-180 90 -180">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="restricted_zone_2"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21" position="-38 2.5 -410" width="310"
           depth="7" static-body="sphereRadius:NaN" rotation="0 90 0">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="restricted_zone_3"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="-24.7088654936177 2.5 -248.49728480299902" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:5;depth:24" rotation="0 90 0">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="restricted_zone_4"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="-32.32408847426282 -2.5 -657.4195054150834" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:110;depth:8" rotation="0 90 0">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="restricted_zone_5"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="-31.6866986327166 2.5 -654.4293896227906" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:7;depth:110">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="restricted_zone_6"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="24.44508305762973 2.5 -443.0718900329911" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:110;depth:5" rotation="0 90 0">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="plus_zone_1"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="-22.702044151578896 2.5 -595.563010194831" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:5;depth:5">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="plus_zone_3"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="-14.847086954987454 2.5 -516.2716154461406" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:4;depth:4">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>
    <a-box material="transparent:true;opacity:0.5" color="blue" id="plus_zone_4"
           triggerbox="triggereventname:spheretest;width:21;height:21;depth:21"
           position="9.440297514736038 2.5 -368.90207233151705" width="290" depth="9" static-body="sphereRadius:NaN"
           geometry="width:4;depth:4">
        <a-event name="spheretest_entered" color="green"></a-event>
        <a-event name="spheretest_exited" color="red"></a-event>
    </a-box>


</a-scene>

</body>

</html>

